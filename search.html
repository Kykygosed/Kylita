<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Test Lecture Audio</title>
<style>
  body { background: #222; color: white; font-family: Arial, sans-serif; padding: 20px; }
  #logs { margin-top: 20px; white-space: pre-wrap; background: #333; padding: 10px; border-radius: 8px; max-height: 200px; overflow-y: auto; }
  button { font-size: 18px; padding: 10px 20px; border-radius: 10px; border: none; background: orange; color: black; cursor: pointer; }
  button:disabled { background: #666; cursor: not-allowed; }
</style>
</head>
<body>

<h1>Test Lecture Audio - Kylita</h1>
<button id="playBtn">▶️ Play musique</button>

<audio id="audioPlayer" controls style="display:block; margin-top:20px;"></audio>

<div id="logs">Logs :</div>

<script>
const audioPlayer = document.getElementById('audioPlayer');
const playBtn = document.getElementById('playBtn');
const logs = document.getElementById('logs');

const audioUrl = "https://kykygosed.github.io/Kylita/dj_got_us_falling_in_love.mp3";

function log(msg) {
  console.log(msg);
  logs.textContent += "\n" + msg;
  logs.scrollTop = logs.scrollHeight;
}

// On prépare la source
audioPlayer.src = audioUrl;
log("Source audio définie : " + audioUrl);

playBtn.addEventListener('click', () => {
  log("Bouton play cliqué, tentative de lecture...");
  audioPlayer.play()
    .then(() => {
      log("Lecture démarrée avec succès !");
      playBtn.disabled = true;
    })
    .catch(err => {
      log("Erreur de lecture : " + err.name + " - " + err.message);
    });
});

// Events audio pour débug
audioPlayer.addEventListener('canplay', () => log("canplay : Le fichier est prêt à être joué."));
audioPlayer.addEventListener('error', (e) => {
  const err = e.target.error;
  log(`Erreur audio event: code ${err.code}, message: ${err.message || "unknown"}`);
});
</script>

</body>
</html>

